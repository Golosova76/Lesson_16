# API

**API** это набор протоколов и соглашений, которые позволяют различным приложениям и сервисам обмениваться информацией и взаимодействовать друг с другом.
**API** позволяет создавать приложения, которые могут использовать функциональность других приложений или сервисов, необходимых для своей работы. Приложение для онлайн-покупок может использовать API банковской системы для обработки платежей или API сервиса доставки для расчета стоимости доставки заказа.
Может быть реализован **API** в виде веб-сервисов, библиотек, SDK и других форматах.

## Типы API

Категория, которая описывает где и как **API** используется. Тип **API** определяется его назначением и средой в которой он работает.

**Web API**  
Взаимодействие через интернет с использованием http/https. Для связи между клиентами (браузеры, мобильные приложения) и серверами. Сервер получает запрос через URL-эндпоинт и отправляет ответ, который часто представлен в формате JSON.  
REST API / SOAP API / GraphQL API

**Библиотеки**  
Наборы функций и классов, которые можно использовать в коде

**SDK**  
software development kit
Набор инструментов, библиотек и документации для разработки приложений под определенную платформу или сервис.

**Локальные API**  
Для взаимодействия между компонентами внутри одного устройства или системы.  
Windows API

**Аппаратные API**  
Доступ к функциям оборудования

## Формат API

Способ организации данных и взаимодействия между клиентом и сервером. Формат определяет как данные передаются и обрабатываются.  
REST API / WebSocket

## Формат данных API

способ представления данных которые передаются между клиентом и сервером.  
JSON / XML / YAML

**WebSocket** - протокол для двусторонней связи между клиентом и сервером в реальном времени

# REST

акроним от **REpresentational State Transfer** (передача репрезентативного состояния) и архитектурный стиль для распределенных гипермедиа систем. Не является протоколм иили стандартом, это именно архитектурный стиль. При разработке **API** разработчики могут реализовать REST различными способами.  
Имеет свои принципы и ограничения.  
Используется для создания веб-сервисов, основан на использовании стандартных http-методов (GET, POST, PUT, DELETE) для взаимодействия с ресурсами. Каждый ресурс в REST идентифицируется уникальным URL, а данные передаются в формате JSON / XML или другом.  
Системы, реализующие REST называются RESTful.

**акроним** (от греческого) аббревиатура, образованная от начальных букв или словосочетаний, произносимая как единое слово, а не побуквенно.

**архитектурный стиль** - набор принципов и ограничений, которые определяют как строить программные системы. Он не является конкретной рекомендацией, а скорее рекомендацией по организации взаимодействия компонентов.

**Репрезентативность** - характеристика, показывающая, что отобранные объекты, представители, части, элементы по своему содержанию, характеристикам соответствуют полной совокупности, массиву данных или аудитории людей из которых их отобрали.

**Репрезентативное состояние** - это текущее состояние ресурса, представленное в виде данных, которые клиент может запросить или изменить. В REST клиент взаимодействует с сервером через репрезентации (представления) ресурсов, а не напрямую с самими ресурсами.

## Распределенные гипермедиа системы distributed hypermedia systems.

**Распределенная система** - система, в которой компоненты (серверы, базы данных, клиенты) расположены на разных компьютерах, соединенных сетью. Эти компоненты взаимодействуют друг с другом для выполнения общей задачи.  
**Гипермедиа** - это расширение понятия гипертекста (текст + другие типы данных картинки видео аудио и др.).  
В гипермедиа системах данные связаны между собой с помощью ссылок, что позволяет пользователю переходить от одного ресурса к другому.

**Ресурс** - объект или сущность. **Репрезентация** - способ представления ресурса в формате, понятном клиенту (JSON или XML). **Состояние** - текущие данные ресурса (имя пользовател, его почта).

1. user id 1 /user/1
2. Клиент отправляет запрос GET /user/1
3. Сервер не отправляет сам объект из базы, а отдает репрезентацию ресурса (JSON).

```json
{
  "id": 1,
  "name": "John Doe",
  "age": 30,
  "email": "johndoe@example.com"
}
```

Это JSON представление (репрезентация) отражает состояние ресурса в данный момент времени. Если клиент хочет изменить данные, он отправляет новую репрезентацию (PUT) с измененными данными.

У архитектуры REST есть одно из ограничений - интерфейс компонентов должен быть одинаковым. Это означает использование стандарта **URI** для идентификации ресурсов - другими словами, путей, который можно ввести в адресную строку браузера.  
https://api.example.com/users/123  
Здесь users/123 означает запрос данных о пользователе с ID 123.

# URI

унифицированный идентификатор ресурса uniform resource identifier  
**имя и адрес ресурса в сети**  
Может содержать **URL** и **URN**  
Состоит из:

1. Схема (scheme) показывает как обратится к ресурсу (чаще всего сетевой протокол http, ftp...).
2. Иерархическая часть (hier-part) данные, необходимые для идентификации ресурса (адрес сайта).
3. Запрос (query) необязательные дополнительные данные ресурса (пр - поисковый запрос).
4. Фрагмент (fragment) необязательный компонент для идентификации вторичного ресурса (пр - место на странице).  
   https://wiki.merionet/images/vse-chto/1.png

## URL

унифицированный определитель местонахождения ресурса uniform resource locator  
адрес ресурса в сети, определяет местонахождение и способ обращения к нему.  
Когда мы переходим по URL-адресу в web, то фактически выполняется GET-запрос на этот конкретный ресурс, а вебсайт, который отражается это тело ответа.  
Все **URL** это **URI**, но не все **URI** это **URL**

## URN

унифицированное имя ресурса uniform resource name  
только имя ресурса, но не говорит как к нему подключаться  
Это **URI**, но не **URL**.

# Request Запрос and Response Ответ

**HTTP** (HyperText Transfer Protocol) метод связи между клиентами и серверами.  
**HTTP** работает путем открытия TCP-соединения (Transmission Control Protocol) с портом сервера (80/HTTP 443/HTTPS) для выполнения запроса, а сервер, ожидающий соединения, отвечает статусом и телом.

## **Request** должен состоять из:

1. URL => https://example.com
2. Method => POST
3. Headers => user-agent..
4. Body => Data

Существуют четыре основных HTTP-метода (HTTP-глаголы). Эти методы определяют действие, которое будет выполнено с данным ресурсом.  
HTTP-методы запроса частично соответствуют парадигме CRUD, которая расшифровывается как Create(Создание), Update(Обновление), Read(Чтение), Delete(Удаление).

1. **Чтение** - **GET** - **Получает ресурс**
2. **Создание** - **POST** - **Создает новый ресурс**
3. **Обновление** - **PUT** - **Обновляет существующий ресурс**
4. **Удаление** - **Delete** - **Удаляет ресурс**

**GET** - безопасная операция только для чтения, которая не изменяет состояние сервера. Каждый раз при переходе по URL-адресу в браузере, например https://www.google.com, отправляется GET-запрос на серверы Google.  
**POST** - используется для создания нового ресурса. Пример POST может быть регистрация пользователя на сайте или в приложении. После отправки формы POST-запрос с данными пользователями может быть отправлен на сервер, который потом запишет эту информацию в базу данных.

## **Response** должен состоять из:

1. Status code => 200
2. Headers => content-type..
3. Body => Data

Когда запрос проходит от клиента серверу, сервер отправляет HTTP-ответ, который включает метаданные о ответе. Первая и самая важная часть ответа - это код состояния, который указывает, был ли запрос успешным, произошла ли ошибка или требуется выполнить другое действие.  
**404** - **Не найдено**  
Существует пять классов кодов состояния, каждый из которых охватывает определенный диапазон ответов. Трехзначный номер, уникальное значение состояния, обработанного сервером запроса.

1. **1хх** - 100-199 - **Информационные**
2. **2хх** - 200-299 - **Успешные**
3. **3хх** - 300-399 - **Перенаправление**
4. **4хх** - 400-499 - **Ошибка клиента**
5. **5хх** - 500-599 - **Ошибка сервера**

**500 Internal Server Error** внутренняя ошибка сервера

В контексте **RESTful API** все ответы должны находится в диапазоне 2хх(успешные).

У каждого HTTP-статуса есть числовой код и текстовое описание.

- 200 OK — запрос успешно выполнен.
- 201 Created — ресурс успешно создан.
- 400 Bad Request — сервер не может обработать запрос из-за ошибки клиента.
- 404 Not Found — запрашиваемый ресурс не найден.
- 100 Continue — клиент может продолжать отправку запроса.

Текстовое описание предназначено для того, чтобы сделать статус более понятным для разработчиков/для логов/для пользователей.

# REST API Endpoints (Конечные точки REST API)

Когда API создается на сервере, данные, которые оно содержит доступно через конечные точки (endpoints).  
Типичный **RESTful API** имеет множество конечных точек, соответствующих его доступным ресурсам.  
Например **API**, который поддерживает приложение социальных сетей, скореее всего, будет включать эндпоинты для пользователей, публикаций и комментариев.  
Запросы к эндпоинтам это стандартные HTTP-методы.  
Хорошо спроектированный **API** должен иметь четкие и интуитивно понятные конечные точки, которые обеспечивают предсказуемый способ взаимодействия клиентов с ресурсами сервера.  
Например **RESTful API**, который поддерживает приложение для ведения блога может иметь эндпоинты, доступ к кoторым можно получить:

- /authors для получения списка пользователей **GET** или создания нового пользователя **POST**.
- /authors/:id для получения определенного пользователя по его id **GET**, обновления существующего пользователя **PUT** или **PATCH** или удаления определенного пользователя **Delete**.
- /articles для получения списка статей **GET** или создания новой статьи **POST**.
- /articles/:id для получения конкретной статьи по ее id **GET**, обновления существующую пользователя **PUT** или **PATCH** или удаления определенной статьи **Delete**.

В примере видно что **API** предоставляет два набора конечных точек: один для ресурса автор один для ресурса статья. Доступ к каждому ресурсу можно получить через две разные конечные точки, в зависимости от типа операции, которую клиент хочет выполнить.

Endpoint – это часть URL.

## JSON

JavaScript Object Notation  
Объект, состоит из двух частей - ключей (keys) и значений (values). Текстовый формат обмена данными, основанный на синтаксисе объектов JS. Используется для представления структурированных данных в виде пар "ключ-значение" и массивов. Ключи это свойство, атрибут описываемого объекта.

```json
{
  "string": "строка",
  "integer": 25,
  "boolean": true,
  "array": [1, 2, 3],
  "object": {
    "string": "строка"
  }
}
```
